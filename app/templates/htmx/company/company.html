{% block header %}
{% endblock %}

{% block content %}
<br>
<div class="column">
    <h3 class="title is-3">Dados da empresa</h3>
    <div class="box">

        <div class="fixed-grid has-1-cols">
            <div class="grid">
                <div class="cell"><span class="tag is-medium"><p><b>Nome:</b> {{ company.name }}</p></span></div>
                <div class="cell"><span class="tag is-medium"><p><b>Descrição:</b> {{company.description}}</p></span></div>
                <div class="cell"><span class="tag is-medium"><p><b>Endereço:</b> {{ company.address }}</p></span></div>
                <div class="cell"><span class="tag is-medium"><p><b>VatCode (NIF):</b> {{company.vatcode}}</p></span></div>
            </div>
        </div>
    </div>
</div>

<div class="column">
    <span class="title is-3">Colaboradores</span>
    <span class="icon has-text-info">
        <button class="fas fa-info-circle" onclick="tutorial('employees');"></button>
    </span>
    <span style="float: right">
        {% if current_user.userTypeId == 1 %}
        <button id="addEmployee" class="button" hx-target="#addUser" hx-swap="innerHTML"
            hx-get="/signup_worker/{{company.id}}" data-loading-class="is-loading">
            <p><i class="fa-solid fa-plus fa-lg"></i> <i class="fa-solid fa-user fa-lg"></i></p>
        </button>
        {% endif %}
    </span>
</div>

<div id="workers" class="box">
    <div class="fixed-grid has-1-cols-mobile">
        <div class="grid">
            {% for worker in users_company %}
            <span class="cell tag is-medium has-text-dark has-background-info-light"
                style="display: flex; justify-content: space-between;"><i class="fa-solid fa-id-card"></i>
                <p>{{worker.name}}</p>
                <p></p>
            </span>
            {% endfor %}
        </div>
    </div>
</div>

<div id="addUser"></div>
<div class="column">
    <span class="title is-3">Veículos</span>
    <span class="icon has-text-info">
        <button class="fas fa-info-circle" onclick="tutorial('vehicles');"></button>
    </span>
    <span style="float: right">
        {% if current_user.userTypeId == 1 %}
        <button id="addVehicle" class="button" hx-target="#addCar" hx-swap="innerHTML"
            hx-get="/vehicle/add/{{company.id}}" data-loading-class="is-loading">
            <p><i class="fa-solid fa-plus fa-lg"></i> <i class="fa-solid fa-car fa-lg"></i></p>
        </button>

        {% endif %}
    </span>
</div>

<div class="box" id="vehicles" hx-get="/vehicle/list/{{company.id}}" hx-trigger="load" hx-target="this"
hx-swap="innerHTML">
    
</div>
<div id="addCar"></div>

<h3 class="title is-3">Mapa</h3>
<div class="box">
    <div id="map" x-data="mapData()" x-init="initMap({{company.id}})" style="height: 400px; z-index: 2;"></div>
</div>
{% endblock %}