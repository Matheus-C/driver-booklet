{% extends 'base/base.html' %}

{% block header %}
{% endblock %}

{% block content %}
<div class="container">
    <br>
    <h3 class="title is-3">Company Info</h3>
    <div class="box">

        <div class="fixed-grid has-1-cols">
            <div class="grid">
                <div class="cell"><span class="tag is-medium">Name: {{ company.name }}</span></div>
                <div class="cell"><span class="tag is-medium">Description: {{company.description}}</span></div>
                <div class="cell"><span class="tag is-medium">Address: {{ company.address }}</span></div>
                <div class="cell"><span class="tag is-medium">VatCode(NIF): {{company.vatcode}}</span></div>
            </div>
        </div>
    </div>

    <div class="columns">
        <div class="column">
            <h3 class="title is-3">Employees</h3>
        </div>
        <div class="column">
            <div align="right">
                {% if current_user.userTypeId == 1 %}
                <button class="button" hx-target="#addUser" hx-swap="innerHTML"
                    hx-get="/signup_worker/{{company.id}}">Add User</button>
                
                {% endif %}
            </div>
        </div>
    </div>

    <div class="box">
        {% for user in users_company %}
        {% if user %}
        <p>{{user.name}} (Ident.(NIF) {{user.userIdentification}})</p>
        {% endif %}
        {% endfor %}
    </div>
    <div id="addUser"></div>


    <div class="columns">
        <div class="column">
            <h3 class="title is-3">Vehicles</h3>
        </div>
        <div class="column">
            <div align="right">
                {% if current_user.userTypeId == 1 %}
                <button class="button" hx-target="#addCar" hx-swap="innerHTML"
                    hx-get="/vehicle/add/{{company.id}}">Add Vehicle</button>
                
                {% endif %}
            </div>
        </div>
    </div>

    <div class="box">
        {% for vehicle in vehicles_company %}
        {% if vehicle %}
        <p>{{vehicle.model}} ({{vehicle.licensePlate}})</p>
        {% endif %}
        {% endfor %}
    </div>
    <div id="addCar"></div>
{% endblock %}